[
  {
    "endpoint": "confirm_payment",
    "steps": [
      {
        "alias": "payment",
        "success": {
          "url": "http://127.0.0.1:6102/api/krakend/payment/register",
          "method": "POST",
          "timeout": 10000,
          "header": {
            "Foo": "ZOO; BAR"
          },
          "statuses": [
            200
          ]
        },
        "failure": {
          "url": "http://127.0.0.1:6102/api/krakend/payment/rollback",
          "method": "POST",
          "timeout": 300,
          "header": {
            "Foo": "ZOO; BAR"
          },
          "body": true,
          "message": "The endpoint didn't provide response",
          "statuses": [
            422,
            500
          ]
        }
      },
      {
        "alias": "invoice",
        "success": {
          "url": "http://127.0.0.1:6102/api/krakend/invoice/register",
          "method": "POST",
          "timeout": 10000,
          "header": {
            "Foo": "ZOO; BAR"
          },
          "body": true,
          "statuses": [
            200
          ]
        },
        "failure": {
          "url": "http://127.0.0.1:6102/api/krakend/invoice/rollback",
          "method": "POST",
          "timeout": 300,
          "header": {
            "Foo": "ZOO; BAR"
          },
          "body": true,
          "message": "",
          "statuses": [
            422,
            500
          ]
        }
      },
      {
        "alias": "library",
        "success": {
          "url": "http://127.0.0.1:6102/api/krakend/library/register",
          "method": "POST",
          "timeout": 10000,
          "header": {
            "Foo": "ZOO; BAR"
          },
          "body": true,
          "message": "",
          "statuses": [
            200
          ]
        },
        "failure": {
          "url": "last node require no failure url",
          "method": "POST",
          "timeout": 300,
          "header": {
            "Foo": "ZOO; BAR"
          },
          "body": false,
          "message": "",
          "statuses": [
            422,
            500
          ]
        }
      }
    ]
  }
]