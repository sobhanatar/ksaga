{
  "general": {
    "kafka": {
      "serializer": {
        "key": "",
        "value": ""
      },
      "bootstrap_servers": "host1:port1,host2:port2",
      "buffer_memory": 33554432,
      "compression_type": "none",
      "retries": 2147483647,
      "ssl": {
        "key_password": "",
        "keystore_certificate_chain": "",
        "keystore_key": "",
        "keystore_location": "",
        "keystore_password": "",
        "truststore_certificates": "",
        "truststore_location": "",
        "truststore_password": ""
      },
      "batch_size": 16384,
      "client": {
        "dns_lookup": "use_all_dns_ips",
        "id": "Krakend Saga Client"
      },
      "connections_max_idle_ms": 540000,
      "delivery_timeout_ms": 120000,
      "linger_ms": 0,
      "max_block_ms": 60000,
      "max_request_size": 1048576,
      "receive_buffer_bytes": 32768,
      "security_protocol": "PLAINTEXT",
      "send_buffer_bytes": 131072,
      "request_timeout_ms": 30000,
      "acks": "all",
      "idempotence": true,
      "max_in_flight_requests_per_connection": 5,
      "metadata": {
        "max_age_ms": 300000,
        "max_idle_ms": 300000
      },
      "reconnect": {
        "backoff_max_ms": 1000,
        "backoff_ms": 50
      },
      "retry_backoff_ms": 100,
      "transaction_timeout_ms": 60000,
      "topics": {
        "register": "saga_register",
        "rollback": "saga_rollback",
        "rollback_failed": "saga_rollback_failed"
      }
    }
  },
  "endpoints": [
    {
      "endpoint": "confirm_payment",
      "register": "the transaction process completed successfully",
      "rollback": "the rollback process completed successfully",
      "rollback_failed": "the rollback process failed to complete",
      "steps": [
        {
          "alias": "payment",
          "timeout": 10000,
          "retry_max": 2,
          "retry_wait_min": 300,
          "retry_wait_max": 300,
          "statuses": [
            200
          ],
          "register": {
            "url": "http://127.0.0.1:6102/api/krakend/payment/register",
            "method": "POST",
            "header": {
              "Foo": "Bar"
            },
            "body": true
          },
          "rollback": {
            "url": "http://127.0.0.1:6102/api/krakend/payment/rollback",
            "method": "POST",
            "header": {
              "Foo": "Bar"
            },
            "body": true
          }
        },
        {
          "alias": "invoice",
          "timeout": 10000,
          "retry_max": 3,
          "retry_wait_min": 300,
          "retry_wait_max": 300,
          "statuses": [
            200
          ],
          "register": {
            "url": "http://127.0.0.1:6102/api/krakend/invoice/register",
            "method": "POST",
            "header": {
              "Foo": "Bar"
            },
            "body": true
          },
          "rollback": {
            "url": "http://127.0.0.1:6102/api/krakend/invoice/rollback",
            "method": "POST",
            "header": {
              "Foo": "Bar"
            },
            "body": true
          }
        },
        {
          "alias": "library",
          "timeout": 10000,
          "retry_max": 2,
          "retry_wait_min": 300,
          "retry_wait_max": 300,
          "statuses": [
            200
          ],
          "register": {
            "url": "http://127.0.0.1:6102/api/krakend/library/register",
            "method": "POST",
            "header": {
              "Foo": "Bar"
            },
            "body": true
          },
          "rollback": {
            "url": "http://127.0.0.1:6102/api/krakend/library/rollback",
            "method": "POST",
            "header": {
              "Foo": "Bar"
            },
            "body": false
          }
        }
      ]
    }
  ]
}